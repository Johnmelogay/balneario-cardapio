<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Cardápio Balneário Rio Preto</title>
  <style>
    body { font-family: sans-serif; padding: 1rem; max-width: 600px; margin: auto; }
    h1, h2 { text-align: center; }
    .categoria { margin-top: 2rem; }
    .item { display: flex; justify-content: space-between; padding: 0.3rem 0; border-bottom: 1px solid #eee; }
    .nome { font-weight: bold; }
    .preco { }
  </style>
</head>
<body>
  <h1>Balneário Rio Preto</h1>
  <div id="cardapio">Carregando cardápio…</div>

  <script>
    // URL CSV da sua planilha publicada
    const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vToQfgpKugc81XHL12EjkGLIBaYxnVapPlpsMxD0VD_K5Ymbk014e0hc7IuJ4raEDb6ehxVtsuZgpNd/pub?output=csv';

    // Função simples pra parsear CSV em array de objetos
    function parseCSV(text) {
      const [headerLine, ...lines] = text.trim().split('\n');
      const headers = headerLine.split(',').map(h => h.trim());
      return lines.map(line => {
        // suporta vírgulas dentro de aspas
        const cols = line.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);
        const obj = {};
        headers.forEach((h,i) => {
          obj[h] = cols[i].replace(/^"|"$/g,'').trim();
        });
        return obj;
      });
    }

    fetch(CSV_URL)
      .then(r => r.text())
      .then(text => {
        const data = parseCSV(text);
        const container = document.getElementById('cardapio');
        container.innerHTML = '';  // limpa texto inicial

        // agrupa por categoria
        const grupos = {};
        data.forEach(item => {
          const cat = item.Categoria;
          if (!grupos[cat]) grupos[cat] = [];
          grupos[cat].push(item);
        });

        // monta cada seção de categoria
        Object.entries(grupos).forEach(([cat, itens]) => {
          const sec = document.createElement('div');
          sec.className = 'categoria';
          sec.innerHTML = `<h2>${cat}</h2>`;
          itens.forEach(i => {
            const div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = `
              <span class="nome">${i.Nome}</span>
              <span class="preco">R$ ${i.Preço}</span>
            `;
            sec.appendChild(div);
          });
          container.appendChild(sec);
        });
      })
      .catch(err => {
        document.getElementById('cardapio').innerText = 'Falha ao carregar o cardápio.';
        console.error(err);
      });
  </script>
</body>
</html>
